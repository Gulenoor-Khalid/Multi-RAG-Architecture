<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG Multi-LLM Chat</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>ü§ñ RAG Multi-LLM Chat</h1>
            <p>H·ªá th·ªëng RAG v·ªõi nhi·ªÅu model LLM quantized</p>
        </header>

        <!-- Control Panel -->
        <div class="control-panel">
            <div class="control-group">
                <label for="queryMode">Mode:</label>
                <select id="queryMode">
                    <option value="rag">ü§ñ RAG Mode (Local LLM)</option>
                    <option value="gemini">‚ú® Gemini API (Google Search)</option>
                </select>
            </div>

            <!-- RAG Mode Settings -->
            <div id="ragSettings" class="mode-settings">
                <div class="control-group">
                    <label for="modelSelect">Model:</label>
                    <select id="modelSelect">
                        <option value="">Loading models...</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>
                        <input type="checkbox" id="useRAG" checked>
                        S·ª≠ d·ª•ng RAG
                    </label>
                </div>

                <div class="control-group">
                    <button id="systemPromptBtn" class="btn-secondary">‚öôÔ∏è System Prompt</button>
                </div>
            </div>

            <!-- Gemini Mode Settings -->
            <div id="geminiSettings" class="mode-settings" style="display: none;">
                <div class="control-group">
                    <label for="geminiApiKey">Gemini API Key:</label>
                    <input type="password" id="geminiApiKey" placeholder="Nh·∫≠p API key c·ªßa b·∫°n..." style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                </div>

                <div class="control-group">
                    <label>
                        <input type="checkbox" id="useGrounding" checked>
                        S·ª≠ d·ª•ng Google Search
                    </label>
                </div>

                <div class="control-group">
                    <label for="geminiModel">Gemini Model:</label>
                    <select id="geminiModel">
                        <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash</option>
                        <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
                        <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
                    </select>
                </div>
            </div>

            <!-- Common Settings -->
            <div class="control-group">
                <label for="temperature">Temperature: <span id="tempValue">0.7</span></label>
                <input type="range" id="temperature" min="0" max="1" step="0.1" value="0.7">
            </div>

            <div class="control-group">
                <label for="maxTokens">Max Tokens: <span id="tokensValue">512</span></label>
                <input type="range" id="maxTokens" min="128" max="2048" step="128" value="512">
            </div>
        </div>

        <!-- System Prompt Modal -->
        <div id="promptModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>‚öôÔ∏è System Prompt Configuration</h2>
                    <span class="close">&times;</span>
                </div>
                <div class="modal-body">
                    <p>ƒê·ªãnh nghƒ©a vai tr√≤ v√† h√†nh vi c·ªßa chatbot:</p>
                    <textarea id="systemPromptInput" rows="8" placeholder="Nh·∫≠p system prompt..."></textarea>
                    
                    <div class="prompt-templates">
                        <h4>üìã Templates:</h4>
                        <button class="template-btn" data-template="default">M·∫∑c ƒë·ªãnh</button>
                        <button class="template-btn" data-template="fashion">T∆∞ v·∫•n Qu·∫ßn √°o</button>
                        <button class="template-btn" data-template="support">ChƒÉm s√≥c Kh√°ch h√†ng</button>
                        <button class="template-btn" data-template="teacher">Gia s∆∞</button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="savePromptBtn" class="btn-primary">L∆∞u</button>
                    <button id="cancelPromptBtn" class="btn-secondary">H·ªßy</button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <h3>üìÅ Upload Documents</h3>
                <div class="upload-section">
                    <input type="file" id="fileInput" accept=".pdf,.txt,.docx" multiple>
                    <button id="uploadBtn" class="btn-primary">Upload</button>
                    <div id="uploadStatus" class="status-message"></div>
                </div>

                <h3 style="margin-top: 20px;">üñºÔ∏è Upload Image</h3>
                <div class="upload-section">
                    <input type="file" id="imageInput" accept="image/*">
                    <button id="uploadImageBtn" class="btn-primary">Upload Image</button>
                    
                    <div class="control-group" style="margin-top: 10px;">
                        <label for="imageMode">Image Mode:</label>
                        <select id="imageMode">
                            <option value="vqa">Q&A v·ªÅ ·∫£nh</option>
                            <option value="caption">M√¥ t·∫£ ·∫£nh</option>
                        </select>
                    </div>
                    
                    <div id="imagePreview" style="display: none; margin-top: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9;"></div>
                    <button id="clearImageBtn" class="btn-secondary" style="display: none; margin-top: 10px; width: 100%;">Clear Image</button>
                </div>

                <div class="stats">
                    <h4>üìä System Stats</h4>
                    <div id="stats">
                        <p>Model: <span id="currentModel">-</span></p>
                        <p>Documents: <span id="docCount">0</span></p>
                        <p>Status: <span id="systemStatus">-</span></p>
                    </div>
                </div>

                <button id="clearDocsBtn" class="btn-danger">Clear All Documents</button>
            </aside>

            <!-- Chat Area -->
            <main class="chat-container">
                <div id="chatMessages" class="chat-messages">
                    <div class="message bot-message">
                        <div class="message-content">
                            <p>üëã Xin ch√†o! T√¥i l√† tr·ª£ l√Ω AI v·ªõi nhi·ªÅu ch·∫ø ƒë·ªô:</p>
                            <ul>
                                <li><strong>ü§ñ RAG Mode:</strong> S·ª≠ d·ª•ng LLM local v·ªõi t√†i li·ªáu ƒë√£ upload</li>
                                <li><strong>‚ú® Gemini API:</strong> T√¨m ki·∫øm th√¥ng tin realtime v·ªõi Google Search</li>
                            </ul>
                            <p>Ch·ªçn mode ph√π h·ª£p v√† b·∫Øt ƒë·∫ßu chat!</p>
                        </div>
                    </div>
                </div>

                <div class="chat-input-container">
                    <textarea 
                        id="chatInput" 
                        placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..."
                        rows="3"
                    ></textarea>
                    <button id="sendBtn" class="btn-primary">
                        <span id="sendBtnText">G·ª≠i</span>
                    </button>
                </div>
            </main>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
